<form #flightForm="ngForm" (ngSubmit)="onSubmit()">
  <div class="grid-container fluid">
    <div class="grid-x grid-margin-x">
      <div class="cell medium-2"></div>
      <div class="cell auto">
        <div class="grid-x grid-padding-x">
          <div class="small-8 cell">
            <h2>{{title}}</h2>
          </div>
          <div class="small-4 cell">
            <button class="float-right button hollow alert" (click)="deleteFlight()" *ngIf="flight.id && !isLoading" [disabled]="submitted">Smazat</button>
          </div>
        </div>
        <div class="grid-x grid-padding-x margin-top-3 margin-bottom-3" *ngIf="isLoading">
          <div class="cell text-center">
            <h3>Načítání ...</h3>
          </div>
        </div>
        <div class="grid-x grid-padding-x margin-top-3 margin-bottom-3" *ngIf="message">
          <div class="cell text-center">
            <div class="callout {{message.type}} text-left" data-closable>
              <p>{{message.text}}</p>
              <!--<button class="close-button" aria-label="Dismiss alert" type="button" data-close>
                <span aria-hidden="true">&times;</span>
              </button>-->
            </div>
          </div>
        </div>
        <div class="grid-x grid-padding-x margin-top-3" *ngIf="!isLoading && !created">
          <div class="cell medium-4 small-6">
            <label class="label-required {{(date.valid || date.untouched) ? '' : 'is-invalid-label'}}">
              Datum odletu
              <input type="text" placeholder="yyyy-mm-dd" required name="date" [ngModel]="flight._dateOfDeparture | date:'yyyy-MM-dd'" (ngModelChange)="changeDepartureDate(date)" #date="ngModel" appDate>
            </label>
          </div>
          <div class="cell medium-4 small-6">
            <label class="label-required {{(time.valid || time.untouched) ? '' : 'is-invalid-label'}}">
              Čas odletu
              <input type="text" placeholder="hh:mm" required name="time" [ngModel]="(flight._timeOfDeparture?.hours | number: '2.0-0')+':'+(flight._timeOfDeparture?.minutes | number: '2.0-0')" (ngModelChange)="changeTimeOfDeparture(time)" #time="ngModel" appTime>
            </label>
          </div>
          <div class="cell medium-4 small-6">
            <label class="label-required {{(flightLength.valid || flightLength.untouched) ? '' : 'is-invalid-label'}}">
              Délka letu
              <input type="text" placeholder="hh:mm" required name="flightLength" [ngModel]="(flight._flightLength?.hours | number: '2.0-0')+':'+(flight._flightLength?.minutes | number: '2.0-0')" (ngModelChange)="changeFlightLength(flightLength)" #flightLength="ngModel" appTime>
            </label>
          </div>
          <div class="cell medium-4 small-6">
            <label class="label-required {{(destination.valid || destination.untouched) ? '' : 'is-invalid-label'}}">
              Destinace
              <input type="text" required name="destination" [(ngModel)]="flight.destination" #destination="ngModel" pattern="^\S.*$">
            </label>
          </div>
          <div class="cell medium-4 small-6">
            <label class="label-required {{(airplaneInput.valid || airplaneInput.untouched) ? '' : 'is-invalid-label'}}">
              Letadlo
              <select required [formControl]="airplaneInput" (change)="changeAirplane()">
                <option [disabled]="true"></option>
                <option *ngFor="let air of airplanes" [value]="air.id">{{air.id+' ('+air.type.manufacturer+' '+air.type.name+' - '+air.countOfSeats+' osob)'}}</option>
              </select>
            </label>
          </div>
          <div class="cell medium-4 small-6" (change)="changeGate()">
            <label class="label-required {{(gateInput.valid || gateInput.untouched) ? '' : 'is-invalid-label'}}">
              Gate
              <select required [formControl]="gateInput">
                <option [disabled]="true"></option>
                <option *ngFor="let gate of gates" [value]="gate.id">{{gate.terminal.name}}-{{gate.name}}</option>
              </select>
            </label>
          </div>
        </div>
        <div class="grid-x grid-padding-x">
          <div class="cell medium-8 cell-center">
            <div class="button-group expanded">
              <a class="clear button text-right" routerLink="/lety">Zpět na lety</a>
              <input type="submit" class="button"
                     value="{{submitted ? 'Odesílání ...' : title}}"
                     [disabled]="!flightForm.form.valid || submitted || !airplaneInput.valid || !gateInput.valid || created || isLoading" (click)="onSubmit();false">
            </div>
          </div>
        </div>
        </div>
      <div class="cell medium-2"></div>
    </div>
  </div>
</form>
